@use "../../../styles/abstracts/variables" as v;
@use "../../../styles/abstracts/mixins" as m;
@use "../../../styles/abstracts/functions" as fn;

/* Basic variables */
$input-padding-vertical: 0.75rem;
$input-padding-horizontal: 1rem;
$border-color: var(--wp--preset--color--primary, v.$primary);
$primary: v.$primary;
$text-muted: #6c757d;

/* Input Base */
%input-styles {
	display: block;
	width: 100%;
	padding: $input-padding-vertical $input-padding-horizontal;
	font-size: var(--wp--preset--font-size--root, 1rem);
	line-height: 1.25;
	color: var(--wp--preset--color--primary, v.$primary);
	background-color: white;
	background-clip: padding-box;
	border: 2px solid $border-color;
	border-radius: var(--border-radius, var(--default-border-radius));
	transition: fn.transition(border-color, box-shadow, padding);
	box-shadow: none;
	appearance: none;

	/* Small accessibility/touch improvements */
	min-height: 2.5rem;

	/* Focus state */
	&:focus {
		outline: none;
		padding-top: 1.625rem;
		padding-bottom: 0.625rem;
		border-color: rgba($primary, 0.85);
		box-shadow: 0 0 0 0.2rem rgb(13 110 253 / 15%);
	}
}

.wp-block-mbs-interest-form {
	--default-border-radius: 1.25rem;
	--default-gap: 1rem;

	display: flex;
	flex-wrap: wrap;
	gap: var(--gap, var(--default-gap));

	/* Button styles */
	.btn {
		display: inline-block;
		font-weight: 400;
		text-align: center;
		vertical-align: middle;
		user-select: none;
		border: 1px solid transparent;
		padding: 0.5rem 1rem;
		font-size: 1rem;
		line-height: 1.5;
		border-radius: 1.25rem;
		cursor: pointer;

		&.btn-primary {
			background-color: var(--button-background-color, v.$primary);
			border-color: var(--button-border-color, v.$primary);
			color: var(--button-color, white);
		}
	}

	.col-12 {
		flex: 1 0 100%;
	}

	.col-md-6 {
		flex: 1 0 100%;

		@include m.media-breakpoint-up(md) {
			flex-basis: calc(50% - var(--gap, var(--default-gap)));
		}
	}

	.form-floating {
		position: relative;

		.form-select {
			@extend %input-styles;

			padding-right: 2.25rem; /* room for dropdown caret if needed */
			background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%233d1c11' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
			background-size: 1rem 0.75rem;
			background-repeat: no-repeat;
			background-position: right $input-padding-horizontal center;
		}

		& > .form-control:not(:placeholder-shown),
		& > .form-select:not(:placeholder-shown) {
			padding-top: 1.625rem;
			padding-bottom: 0.625rem;
		}

		label {
			z-index: 2;
			max-width: 100%;
			overflow: hidden;
			text-align: start;
			text-overflow: ellipsis;
			white-space: nowrap;
			font-size: 1rem;
			transform-origin: 0 0;
			position: absolute;
			left: $input-padding-horizontal;
			top: 50%;
			transform: translateY(-50%);
			pointer-events: none;
			transition: fn.transition(transform, top, color, scale, translate);
			padding: $input-padding-horizontal 0.75rem;
			color: $text-muted;
			background: transparent;
		}

		& > .form-control:focus ~ label,
		& > .form-select:focus ~ label,
		& > .form-control:not(:placeholder-shown) ~ label,
		& > .form-select:not(:placeholder-shown) ~ label {
			scale: 0.85;
			translate: 0.15rem -0.75rem;
		}
	}

	/* Inputs and selects */
	.form-control {
		@extend %input-styles;

		/* Remove visible placeholder text so label acts as placeholder */
		&::placeholder {
			color: transparent;
			opacity: 0;
		}
	}
}
